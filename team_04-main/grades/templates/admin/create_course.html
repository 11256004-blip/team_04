{% extends "admin/base_site.html" %}
{% load static %}

{% block title %}å¿«é€Ÿæ–°å¢èª²ç¨‹{% endblock %}

{% block content %}
<style>
    .create-form {
        max-width: 600px;
        margin: 30px auto;
        background: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .create-form h1 {
        color: #333;
        margin-bottom: 25px;
        border-bottom: 3px solid #417690;
        padding-bottom: 10px;
    }
    
    .form-group {
        margin-bottom: 20px;
    }
    
    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: #333;
        font-size: 14px;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
        font-family: inherit;
        box-sizing: border-box;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
        outline: none;
        border-color: #417690;
        box-shadow: 0 0 5px rgba(65, 118, 144, 0.3);
    }
    
    .form-group textarea {
        resize: vertical;
        min-height: 80px;
    }
    
    .form-group.required label::after {
        content: ' *';
        color: #e74c3c;
    }
    
    .button-group {
        display: flex;
        gap: 10px;
        margin-top: 30px;
    }
    
    .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.3s;
    }
    
    .btn-primary {
        background-color: #417690;
        color: white;
        flex: 1;
    }
    
    .btn-primary:hover {
        background-color: #2c5282;
    }
    
    .btn-secondary {
        background-color: #ccc;
        color: #333;
        flex: 1;
    }
    
    .btn-secondary:hover {
        background-color: #aaa;
    }
    
    .info-box {
        background: #e8f4f8;
        border-left: 4px solid #417690;
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 4px;
    }
    
    .info-box p {
        margin: 5px 0;
        color: #333;
        font-size: 13px;
    }
    
    .no-teachers {
        background: #fee;
        border: 1px solid #fcc;
        border-radius: 4px;
        padding: 15px;
        color: #c00;
        margin-bottom: 20px;
    }
</style>

<div class="create-form">
    <h1>ğŸ“š å¿«é€Ÿæ–°å¢èª²ç¨‹</h1>
    
    <div class="info-box">
        <p><strong>èªªæ˜:</strong></p>
        <p>â€¢ èª²ç¨‹åç¨±: èª²ç¨‹çš„å®Œæ•´åç¨±ï¼ˆå¿…å¡«ï¼‰</p>
        <p>â€¢ èª²ç¨‹ä»£ç¢¼: å”¯ä¸€è­˜åˆ¥ç¢¼ï¼Œä¾‹å¦‚ CS101ï¼ˆå¿…å¡«ï¼‰</p>
        <p>â€¢ æˆèª²æ•™å¸«: é¸æ“‡è©²èª²ç¨‹çš„æˆèª²æ•™å¸«ï¼ˆå¯é¸ï¼‰</p>
        <p>â€¢ èª²ç¨‹æè¿°: èª²ç¨‹çš„ç°¡ä»‹å’Œå…§å®¹</p>
    </div>
    
    {% if not teachers %}
    <div class="no-teachers">
        âš ï¸ ç³»çµ±ä¸­å°šç„¡æ•™å¸«å¸³è™Ÿã€‚è«‹å…ˆ <a href="/admin/auth/user/auth_user/add/" style="color: #c00; text-decoration: underline;">å»ºç«‹æ•™å¸«</a>
    </div>
    {% endif %}
    
    <form method="post" novalidate>
        {% csrf_token %}
        
        {% if messages %}
        <div style="margin-bottom: 20px;">
            {% for message in messages %}
            <div style="padding: 12px; border-radius: 4px; margin-bottom: 10px; 
                        {% if message.tags %}
                        background: {% if 'error' in message.tags %}#fee{% else %}#efe{% endif %};
                        color: {% if 'error' in message.tags %}#c00{% else %}#070{% endif %};
                        border-left: 4px solid {% if 'error' in message.tags %}#c00{% else %}#070{% endif %};
                        {% endif %}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
        
        <div class="form-group required">
            <label for="id_name">èª²ç¨‹åç¨±</label>
            <input type="text" id="id_name" name="name" required 
                   placeholder="ä¾‹å¦‚: Python ç¨‹å¼è¨­è¨ˆ">
        </div>
        
        <div class="form-group required">
            <label for="id_code">èª²ç¨‹ä»£ç¢¼</label>
            <input type="text" id="id_code" name="code" required 
                   placeholder="ä¾‹å¦‚: CS101">
        </div>
        
        <div class="form-group">
            <label for="id_teacher">æˆèª²æ•™å¸«</label>
            <select id="id_teacher" name="teacher">
                <option value="">-- ä¸æŒ‡å®šæ•™å¸« --</option>
                {% for teacher_id, first_name, last_name, username in teachers %}
                <option value="{{ teacher_id }}">
                    {{ last_name }}{{ first_name }} ({{ username }})
                </option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-group">
            <label for="id_description">èª²ç¨‹æè¿°</label>
            <textarea id="id_description" name="description" 
                      placeholder="è¼¸å…¥èª²ç¨‹çš„ç°¡ä»‹å’Œå…§å®¹..."></textarea>
        </div>
        
        <div class="button-group">
            <button type="submit" class="btn btn-primary" {% if not teachers %}disabled{% endif %}>âœ… å»ºç«‹èª²ç¨‹</button>
            <a href="/admin/grades/course/" class="btn btn-secondary" style="text-decoration: none; display: flex; align-items: center; justify-content: center;">â† è¿”å›èª²ç¨‹åˆ—è¡¨</a>
        </div>
    </form>
</div>
{% endblock %}
