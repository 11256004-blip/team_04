{% extends 'grades/base.html' %}

{% block content %}
  <a href="{% url 'grades:main' %}" class="btn btn-small" style="margin-bottom: 20px;">â¬…ï¸ å›åˆ°ä¸»é </a>
  
  <div class="course-card">
    <h2>ğŸ“š {{ course.name }}</h2>
    <div class="info-card">
      <p><strong>èª²ç¨‹ä»£ç¢¼ï¼š</strong>{{ course.code }}</p>
      <p><strong>ğŸ‘¨â€ğŸ« ä»»èª²è€å¸«ï¼š</strong>{{ course.teacher }}</p>
    </div>
  </div>
  
  <!-- èª²ç¨‹ç•™è¨€æ“ä½œæŒ‰éˆ• -->
  <div style="margin-bottom: 30px; display: flex; gap: 10px; flex-wrap: wrap;">
    <a href="{% url 'grades:course_comments' course.id %}" 
       class="btn" 
       style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); flex: 1; min-width: 150px;">
      ğŸ’¬ æŸ¥çœ‹èª²ç¨‹ç•™è¨€
    </a>
  </div>

  <h3>ğŸ‘¥ ä¿®èª²å­¸ç”Ÿåå–®</h3>
  {% if enrollments %}
    <table>
      <thead>
        <tr>
          <th>å­¸ç”Ÿå§“å</th>
          <th style="text-align: center;">æœŸä¸­æˆç¸¾</th>
          <th style="text-align: center;">æœŸæœ«æˆç¸¾</th>
          <th style="text-align: center;">å¹³å‡æˆç¸¾</th>
        </tr>
      </thead>
      <tbody>
        {% for e in enrollments %}
          <tr>
            <td>
              <strong>{{ e.student.username }}</strong>
            </td>
            <td style="text-align: center;">
              {% if e.midterm_score %}
                {{ e.midterm_score }}
              {% else %}
                <span style="color: #999;">æœªè¼¸å…¥</span>
              {% endif %}
            </td>
            <td style="text-align: center;">
              {% if e.final_score %}
                {{ e.final_score }}
              {% else %}
                <span style="color: #999;">æœªè¼¸å…¥</span>
              {% endif %}
            </td>
            <td style="text-align: center;">
              {% if e.average %}
                <strong style="color: #667eea;">{{ e.average|floatformat:2 }}</strong>
              {% else %}
                <span style="color: #999;">-</span>
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <div class="empty-state">
      <div class="empty-state-icon">ğŸ“­</div>
      <p style="font-size: 1.2em; color: #666;">ç›®å‰å°šç„¡å­¸ç”Ÿä¿®è®€æ­¤èª²ç¨‹</p>
    </div>
  {% endif %}
{% endblock %}
