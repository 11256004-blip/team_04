{% extends 'grades/base.html' %}

{% block content %}
<div style="max-width: 700px; margin: 0 auto;">
  <h2>ğŸ‘¤ ä¿®æ”¹å€‹äººè³‡è¨Š</h2>
  
  {% if messages %}
    {% for message in messages %}
      <div class="message {% if message.tags %}{{ message.tags }}{% endif %}">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}
  
  <div style="display: flex; gap: 40px; margin: 30px 0;">
    <!-- å·¦å´ï¼šé ­åƒé è¦½ -->
    <div style="flex: 0 0 200px; text-align: center;">
      <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                  border-radius: 50%; 
                  width: 150px; 
                  height: 150px; 
                  margin: 0 auto 20px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  overflow: hidden;
                  box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);">
        {% if profile.avatar %}
          <img src="{{ profile.avatar.url }}" alt="é ­åƒ" style="width: 100%; height: 100%; object-fit: cover;">
        {% else %}
          <div style="font-size: 80px;">ğŸ‘¤</div>
        {% endif %}
      </div>
      <p style="color: #999; font-size: 0.9em;">
        {% if profile.avatar %}
          {{ profile.avatar.name|slice:"-20:" }}
        {% else %}
          æœªè¨­å®šé ­åƒ
        {% endif %}
      </p>
    </div>
    
    <!-- å³å´ï¼šè¡¨å–® -->
    <div style="flex: 1;">
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <p>
          <label for="{{ form.first_name.id_for_label }}">{{ form.first_name.label }}</label>
          {{ form.first_name }}
          {% if form.first_name.errors %}
            <div style="color: #c00; font-size: 0.9em; margin-top: 5px;">
              {{ form.first_name.errors.0 }}
            </div>
          {% endif %}
        </p>
        
        <p>
          <label for="{{ form.last_name.id_for_label }}">{{ form.last_name.label }}</label>
          {{ form.last_name }}
          {% if form.last_name.errors %}
            <div style="color: #c00; font-size: 0.9em; margin-top: 5px;">
              {{ form.last_name.errors.0 }}
            </div>
          {% endif %}
        </p>
        
        <p>
          <label for="{{ form.email.id_for_label }}">{{ form.email.label }}</label>
          {{ form.email }}
          {% if form.email.errors %}
            <div style="color: #c00; font-size: 0.9em; margin-top: 5px;">
              {{ form.email.errors.0 }}
            </div>
          {% endif %}
        </p>
        
        <p>
          <label for="{{ form.avatar.id_for_label }}">{{ form.avatar.label }}</label>
          {{ form.avatar }}
          {% if form.avatar.errors %}
            <div style="color: #c00; font-size: 0.9em; margin-top: 5px;">
              {{ form.avatar.errors.0 }}
            </div>
          {% endif %}
          <small style="color: #666;">æ”¯æ´ JPG, PNG, GIF æ ¼å¼ï¼Œå»ºè­°å¤§å° 200x200px</small>
        </p>
        
        <p>
          <label for="{{ form.bio.id_for_label }}">{{ form.bio.label }}</label>
          {{ form.bio }}
          {% if form.bio.errors %}
            <div style="color: #c00; font-size: 0.9em; margin-top: 5px;">
              {{ form.bio.errors.0 }}
            </div>
          {% endif %}
        </p>
        
        <div class="btn-group" style="margin-top: 30px;">
          <button type="submit" class="btn">ğŸ’¾ ä¿å­˜ä¿®æ”¹</button>
          <a href="{% url 'grades:main' %}" class="btn btn-secondary">âŒ å–æ¶ˆ</a>
        </div>
      </form>
    </div>
  </div>
  
  <!-- å¸³æˆ¶è³‡è¨Š -->
  <div class="info-card" style="margin-top: 40px;">
    <h4>å¸³æˆ¶è³‡è¨Š</h4>
    <p><strong>ç”¨æˆ¶åï¼š</strong> {{ user.username }}</p>
    <p><strong>å…¨åï¼š</strong> {{ user.first_name }} {{ user.last_name }}</p>
    <p><strong>åŠ å…¥æ™‚é–“ï¼š</strong> {{ user.date_joined|date:"Y-m-d H:i" }}</p>
  </div>
</div>
{% endblock %}
