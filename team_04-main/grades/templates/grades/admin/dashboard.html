{% extends "grades/base.html" %}

{% block title %}ç®¡ç†å“¡å„€è¡¨æ¿{% endblock %}

{% block content %}
<h2>ğŸ” ç®¡ç†å“¡å„€è¡¨æ¿</h2>

<!-- Statistics Row -->
<div class="btn-group">
    <div class="course-card" style="flex: 1; text-align: center;">
        <h4 style="color: #667eea;">å­¸ç”Ÿ</h4>
        <h3 style="color: #667eea; font-size: 2em;">{{ stats.total_students }}</h3>
    </div>
    <div class="course-card" style="flex: 1; text-align: center;">
        <h4 style="color: #667eea;">æ•™å¸«</h4>
        <h3 style="color: #667eea; font-size: 2em;">{{ stats.total_teachers }}</h3>
    </div>
    <div class="course-card" style="flex: 1; text-align: center;">
        <h4 style="color: #667eea;">èª²ç¨‹</h4>
        <h3 style="color: #667eea; font-size: 2em;">{{ stats.total_courses }}</h3>
    </div>
    <div class="course-card" style="flex: 1; text-align: center;">
        <h4 style="color: #667eea;">è¨»å†Š</h4>
        <h3 style="color: #667eea; font-size: 2em;">{{ stats.total_enrollments }}</h3>
    </div>
</div>

<!-- Management Links -->
<h3>ç®¡ç†</h3>
<div class="btn-group">
    <a href="{% url 'grades:admin_users' %}" class="btn">ğŸ‘¥ ç®¡ç†ä½¿ç”¨è€…</a>
    <a href="{% url 'grades:admin_courses' %}" class="btn">ğŸ“š ç®¡ç†èª²ç¨‹</a>
    <a href="/admin/" class="btn btn-secondary">âš™ï¸ Django ç®¡ç†å¾Œå°</a>
    <a href="{% url 'grades:main' %}" class="btn btn-secondary">ğŸ  è¿”å›ä¸»é </a>
</div>

<!-- Recent Enrollments -->
<h3>æœ€è¿‘çš„è¨»å†Š</h3>
<table>
    <thead>
        <tr>
            <th>#</th>
            <th>å­¸ç”Ÿ</th>
            <th>èª²ç¨‹</th>
            <th>æœŸä¸­æˆç¸¾</th>
            <th>æœŸæœ«æˆç¸¾</th>
            <th>å¹³å‡</th>
        </tr>
    </thead>
    <tbody>
        {% for enrollment in recent_enrollments %}
        <tr>
            <td>{{ enrollment.id }}</td>
            <td>{{ enrollment.student.username }}</td>
            <td>
                <a href="{% url 'grades:admin_course_detail' enrollment.course.id %}">
                    {{ enrollment.course.name }}
                </a>
            </td>
            <td>{{ enrollment.midterm_score|default:"-" }}</td>
            <td>{{ enrollment.final_score|default:"-" }}</td>
            <td>
                {% if enrollment.average %}
                    <strong>{{ enrollment.average|floatformat:1 }}</strong>
                {% else %}
                    -
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6" style="text-align: center; color: #999;">å°šç„¡è¨»å†Š</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
