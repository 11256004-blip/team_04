{% extends "grades/base.html" %}

{% block title %}{{ course.name }} - èª²ç¨‹è©³æƒ…{% endblock %}

{% block content %}
<h2>ğŸ“– èª²ç¨‹è©³æƒ…: {{ course.name }}</h2>

<div class="btn-group">
    <a href="{% url 'grades:admin_courses' %}" class="btn btn-secondary">â† è¿”å›èª²ç¨‹åˆ—è¡¨</a>
</div>

<!-- Course Info Card -->
<div class="info-card">
    <h3>èª²ç¨‹ä¿¡æ¯</h3>
    <p><strong>èª²ç¨‹åç¨±:</strong> {{ course.name }}</p>
    <p><strong>èª²ç¨‹ä»£ç¢¼:</strong> <code>{{ course.code }}</code></p>
    <p><strong>æ•™å¸«:</strong> 
        {% if course.teacher %}
            {{ course.teacher.get_full_name|default:course.teacher.username }}
        {% else %}
            <span style="color: #999;">æœªåˆ†é…</span>
        {% endif %}
    </p>
    <p><strong>æè¿°:</strong> {{ course.description|default:"ç„¡" }}</p>
    <p><strong>å‰µå»ºæ—¥æœŸ:</strong> {{ course.created_at|date:"Y-m-d H:i" }}</p>
    <p><strong>æœ€å¾Œæ›´æ–°:</strong> {{ course.updated_at|date:"Y-m-d H:i" }}</p>
</div>

<!-- Statistics -->
<div class="info-card" style="text-align: center;">
    <h3>çµ±è¨ˆ</h3>
    <p style="font-size: 2em; color: #667eea; font-weight: bold;">{{ enrollments|length }}</p>
    <p>å­¸ç”Ÿå·²è¨»å†Š</p>
</div>

<!-- Enrolled Students -->
<h3>å·²è¨»å†Šå­¸ç”Ÿ</h3>
{% if enrollments %}
    <table>
        <thead>
            <tr>
                <th>å­¸ç”Ÿåç¨±</th>
                <th>å­¸ç”Ÿç”¨æˆ¶å</th>
                <th>æœŸä¸­æˆç¸¾</th>
                <th>æœŸæœ«æˆç¸¾</th>
                <th>å¹³å‡æˆç¸¾</th>
            </tr>
        </thead>
        <tbody>
            {% for enrollment in enrollments %}
            <tr>
                <td>{{ enrollment.student.get_full_name|default:"-" }}</td>
                <td>{{ enrollment.student.username }}</td>
                <td>{{ enrollment.midterm_score|default:"-" }}</td>
                <td>{{ enrollment.final_score|default:"-" }}</td>
                <td>
                    {% if enrollment.average %}
                        <strong>{{ enrollment.average|floatformat:1 }}</strong>
                    {% else %}
                        -
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p style="color: #999; text-align: center;">æ­¤èª²ç¨‹å°šç„¡å­¸ç”Ÿè¨»å†Š</p>
{% endif %}
{% endblock %}
