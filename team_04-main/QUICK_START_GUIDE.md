# 學生帳號功能 - 快速開始指南

## 🎯 新增的三個核心功能

### 1️⃣ 修改個人資訊 (姓名、個人頭像)
```
位置: /edit_profile/
進入方式: 首頁 → 「👤 修改個人資訊」按鈕
功能:
  ✅ 修改名字
  ✅ 修改姓氏  
  ✅ 上傳個人頭像 (JPG, PNG, GIF)
```

### 2️⃣ 對課程留言 (可修改自己的留言)
```
位置: /add_comment/<course_id>/
進入方式: 課程留言頁面 → 「💬 新增留言」按鈕
功能:
  ✅ 發表課程留言
  ✅ 編輯自己的留言
  ✅ 字數限制: 1000 字元
  ✅ 自動偵測新增/編輯模式
```

### 3️⃣ 查看全部留言
```
位置: /course_comments/<course_id>/
進入方式: 
  方式1: 首頁課程表 → 「💬」按鈕
  方式2: 課程詳情 → 「💬 查看課程留言」按鈕
  
功能:
  ✅ 查看課程所有學生的留言
  ✅ 顯示留言作者信息 (頭像、名字)
  ✅ 顯示留言時間
  ✅ 編輯自己的留言 (藍色邊框標示)
```

---

## 🚀 快速測試

### 準備工作
```powershell
cd c:\Users\user\Downloads\team_04-main\team_04-main
python manage.py runserver 127.0.0.1:8000
```

### 登入測試帳號
```
帳號: student1
密碼: student123
```

### 測試步驟

#### 步驟 1: 修改個人資訊
1. 進入首頁 `/main/`
2. 點擊「👤 修改個人資訊」
3. 填寫名字: "王小明"
4. 上傳一張照片作頭像
5. 點擊「✅ 保存修改」
6. ✓ 返回首頁，資訊已更新

#### 步驟 2: 發表課程留言
1. 在首頁選擇一個課程 (如 "計算機科學")
2. 點擊「💬」按鈕
3. 在「💬 新增留言」頁面輸入留言
4. 例如: "這堂課講得很清楚，學到很多！"
5. 點擊「✅ 發表留言」
6. ✓ 留言發表成功

#### 步驟 3: 編輯你的留言
1. 進入課程留言頁面
2. 找到你自己的留言 (藍色左邊框)
3. 點擊「✏️」編輯按鈕
4. 修改留言內容
5. 點擊「✅ 更新留言」
6. ✓ 留言已更新

#### 步驟 4: 查看所有留言
1. 進入課程留言頁面 `/course_comments/<course_id>/`
2. 查看所有學生發表的留言
3. ✓ 顯示每個留言的:
   - 作者頭像
   - 作者名字
   - 發表/編輯時間
   - 留言內容

---

## 📊 功能對照表

| 功能 | 已實現 | 位置 | 權限 |
|-----|:----:|------|------|
| 修改個人資訊 | ✅ | `/edit_profile/` | 需登入 |
| 上傳個人頭像 | ✅ | `/edit_profile/` | 需登入 |
| 新增課程留言 | ✅ | `/add_comment/<id>/` | 需登入+已選課 |
| 編輯自己的留言 | ✅ | `/edit_comment/<id>/` | 需登入+作者 |
| 查看全部留言 | ✅ | `/course_comments/<id>/` | 所有人 |

---

## 🔗 重要 URL 

### 學生功能 URLs
```
修改個人資訊:    /edit_profile/
新增留言:        /add_comment/<course_id>/
編輯留言:        /edit_comment/<comment_id>/
查看留言:        /course_comments/<course_id>/
```

### 相關頁面
```
首頁:           /main/
課程詳情:       /course/<course_id>/
登入:           /accounts/login/
登出:           /accounts/logout/
```

---

## 📁 新增檔案

```
templates/
  ├─ grades/
  │  ├─ edit_profile.html          (修改個人資訊頁面)
  │  ├─ add_comment.html           (新增/編輯留言頁面)
  │  ├─ edit_comment.html          (編輯留言頁面)
  │  └─ course_comments.html       (查看所有留言頁面)
  │
media/
  └─ avatars/                       (頭像存儲目錄)
```

---

## 💾 資料庫

### 新增模型
```
Comment 表:
  - id: 留言 ID
  - student_id: 學生 ID
  - course_id: 課程 ID
  - content: 留言內容
  - created_at: 建立時間
  - updated_at: 更新時間
```

### UserProfile 更新
```
新增欄位:
  - avatar: 個人頭像 (ImageField)
```

---

## ✨ 設計特色

✅ **梯度背景** - 優雅的紫色漸變效果
✅ **動畫效果** - 流暢的頁面過渡和按鈕懸停效果
✅ **響應式設計** - 適配手機、平板、電腦
✅ **實時反饋** - 字數統計、文件名提示
✅ **權限檢查** - 安全的資料保護
✅ **友好提示** - 清晰的使用者指引

---

## 🎓 示例工作流

### 場景: 學生想要在課程中留言

```
1. 登入系統 (student1/student123)
   ↓
2. 進入首頁 (/main/)
   ↓
3. 查看修課列表
   ↓
4. 點擊課程旁的「💬」按鈕
   ↓
5. 進入課程留言頁面 (/course_comments/<id>/)
   ↓
6. 點擊「💬 新增留言」
   ↓
7. 填寫留言內容 (最多 1000 字)
   ↓
8. 點擊「✅ 發表留言」
   ↓
9. 在留言列表中看到自己的留言 ✓
   ↓
10. 若要編輯，點擊「✏️」按鈕
   ↓
11. 修改內容並點擊「✅ 更新留言」
   ↓
12. 編輯時間戳自動更新 ✓
```

---

## 🔒 安全特性

✅ **登入驗證** - 未登入用戶無法訪問功能
✅ **權限檢查** - 只有選課學生才能留言
✅ **所有權驗證** - 只有作者能編輯自己的留言
✅ **CSRF 保護** - 所有表單都包含 CSRF token
✅ **資料庫約束** - unique_together 確保一個學生一個課程只能有一個留言

---

## 📞 常見問題

**Q: 為什麼看不到上傳的頭像?**
A: 確認 `media/avatars/` 目錄存在，並檢查圖片格式是否支援。

**Q: 能刪除留言嗎?**
A: 目前版本只支援編輯。要刪除可清空留言內容然後更新。

**Q: 為什麼無法留言?**
A: 確認你已選修該課程。只有選課學生才能留言。

**Q: 留言有長度限制嗎?**
A: 是的，最多 1000 字元。

---

## ✅ 完成清單

- [x] 修改個人資訊功能
- [x] 上傳個人頭像功能
- [x] 新增課程留言功能
- [x] 編輯自己的留言功能
- [x] 查看全部留言功能
- [x] 權限控制和驗證
- [x] 優美的界面設計
- [x] 響應式頁面佈局
- [x] 完整的文檔說明

## 🎉 開始使用!

現在訪問 `http://127.0.0.1:8000/` 體驗新功能吧！
